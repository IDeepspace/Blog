<!DOCTYPE HTML><html lang="zh-CN"><head><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="keywords" content="Web 前端工程化（一） —— 什么是前后端分离？, Deepspace"><meta name="description" content="一、什么是 Web 开发？如果在一个比较高的抽象层面来看待这个问题的话，Web 开发就是在处理客户端请求及服务端响应这两件事。

当然，这是抽象。在实际的 Web 开发中，我们会有很多东西需要关注。

二、传统开发模式相信很多做过 Web "><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>Web 前端工程化（一） —— 什么是前后端分离？ | Deepspace</title><link rel="icon" type="image/png" href="/favicon.png"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><script src="/libs/jquery/jquery-2.2.0.min.js"></script><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="container"><div class="nav-wrapper"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><span></span> <span class="logo-span">Deepspace</span></a></div><a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a><ul class="right"><li class="hide-on-med-and-down"><a href="/" class="waves-effect waves-light"><i class="fa fa-home"></i> <span>首页</span></a></li><li class="hide-on-med-and-down"><a href="/tags" class="waves-effect waves-light"><i class="fa fa-tags"></i> <span>标签</span></a></li><li class="hide-on-med-and-down"><a href="/categories" class="waves-effect waves-light"><i class="fa fa-bookmark"></i> <span>分类</span></a></li><li class="hide-on-med-and-down"><a href="/archives" class="waves-effect waves-light"><i class="fa fa-archive"></i> <span>归档</span></a></li><li class="hide-on-med-and-down"><a href="/about" class="waves-effect waves-light"><i class="fa fa-user-circle-o"></i> <span>关于</span></a></li><li><a id="toggleSearch" class="waves-effect waves-light"><i id="searchIcon" class="mdi-action-search"></i></a></li></ul><div class="side-nav" id="mobile-nav"><div class="mobile-head bg-color"><div class="logo-name">Deepspace</div><div class="logo-desc"> 凡事预 ？立 ：废</div></div><ul class="menu-list mobile-menu-list"><li><a href="/" class="waves-effect waves-light"><i class="fa fa-fw fa-home"></i> 首页</a></li><li><a href="/tags" class="waves-effect waves-light"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li><a href="/categories" class="waves-effect waves-light"><i class="fa fa-fw fa-bookmark"></i> 分类</a></li><li><a href="/archives" class="waves-effect waves-light"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li><a href="/about" class="waves-effect waves-light"><i class="fa fa-fw fa-user-circle-o"></i> 关于</a></li><li><div class="divider"></div></li><li><a href="https://github.com/IDeepspace" class="waves-effect waves-light" target="_blank"><i class="fa fa-github-square fa-fw"></i> Fork Me</a></li></ul><div class="social-link"><a href="https://github.com/IDeepspace" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fa fa-github"></i></a><a href="mailto:cxin1427@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fa fa-envelope-open"></i></a><a href="#!" class="tooltipped" data-tooltip="QQ: 690862036" data-position="top" data-delay="50"><i class="fa fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fa fa-rss"></i></a></div></div></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#202020;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style> <a href="https://github.com/IDeepspace" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewbox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a></nav></header><div class="bg-cover post-cover" style="background-image:url(/medias/featureimages/lighted.jpg)"><div class="container"><div class="row"><div class="col s12 m12 l12"><div class="brand"><div class="description center-align post-detail-title"> Web 前端工程化（一） —— 什么是前后端分离？</div></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1,#articleContent h2,#articleContent h3,#articleContent h4,#articleContent h5,#articleContent h6{padding-top:76px;margin-top:-76px}#articleContent h1{line-height:3.5rem}#articleContent h2{line-height:3.2rem}#articleContent h3{line-height:2.8rem}#articleContent h4{line-height:2.5rem}#articleContent h5{line-height:2.2rem}#articleContent h6{line-height:1.9rem}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px}#toc-content .is-active-link{color:#42b983}#toc-content .is-active-link::before{background-color:#42b983}</style><div class="row"><div class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="article-tag"> <a href="/tags/Web-前端工程化/" target="_blank"><span class="chip bg-color">Web 前端工程化</span></a> <a href="/tags/前后端分离/" target="_blank"><span class="chip bg-color">前后端分离</span></a></div><div class="post-info"><span class="post-cate"><i class="fa fa-bookmark fa-fw icon-category"></i> <a href="/categories/FrontEnd/" class="post-category" target="_blank">FrontEnd</a></span><span class="post-date"><i class="fa fa-clock-o fa-fw"></i> 2019-10-31</span></div></div><hr><div class="card-content article-card-content"><div id="articleContent"><h3 id="一、什么是-Web-开发？"><a href="#一、什么是-Web-开发？" class="headerlink" title="一、什么是 Web 开发？"></a>一、什么是 Web 开发？</h3><p>如果在一个比较高的抽象层面来看待这个问题的话，<strong><code>Web</code> 开发就是在处理客户端请求及服务端响应这两件事</strong>。</p><p><img src="https://github.com/IDeepspace/ImageHosting/raw/master/FrontEnd/web-development.jpg" alt="Web 开发" style="zoom:58%"></p><p>当然，这是抽象。在实际的 <code>Web</code> 开发中，我们会有很多东西需要关注。</p><a id="more"></a><h3 id="二、传统开发模式"><a href="#二、传统开发模式" class="headerlink" title="二、传统开发模式"></a>二、传统开发模式</h3><p>相信很多做过 <code>Web</code> 开发的朋友都经历过这样一种开发模式：利用后端语言提供的模板引擎来编写 <code>HTML/XML</code> 页面。例如：</p><ul><li><code>Java web</code> 工程有 <code>jsp</code> 页面</li><li><code>Ruby</code> 项目中有 <code>erb</code> 页面</li><li>与 <code>NodeJS</code> 框架 <code>Express</code> 结合使用的 <code>ejs</code>、<code>jade</code> 等</li><li>…</li></ul><p>后端主要做的事情是从数据库中拉取数据，在 <code>Server</code> 端生成 <code>html</code> 模板，然后将生成的模板发送到客户端。客户端收到模板后，在客户端注入 <code>js</code> 和 <code>css</code>，生成 <code>dom</code> 树，然后渲染成页面呈现给用户。如下图示：</p><p><img src="https://github.com/IDeepspace/ImageHosting/raw/master/FrontEnd/traditional-web-development.jpg" alt="Web 传统开发模式" style="zoom:50%"></p><p>这种开发模式被称为<strong>传统开发模式</strong>或者<strong>前后端混合开发模式</strong>，现在也有一些企业的 <code>Web</code> 应用依然在使用这种开发模式。</p><p>这种开发模式的特点是：页面的模板由后端生成，甚至生成的模板会带有样式和交互，前端仅仅是将模板丢给浏览器渲染成 <code>dom</code> 树生成页面而已。当然，有时候，前端也会注入一些 <code>JavaScript</code> 代码为页面的动态交互提供支持。</p><p>在这种开发模式下工作，你就会发现，同一个开发者需要扮演好几种不同的角色，不仅需要写 <code>server</code> 端的代码，同时也需要写一些模板代码，甚至还需要会写一些 <code>JavaScript</code> 和 <code>CSS</code> 代码，开发者需要在不同角色间切换。往往大多数专注于 <code>server</code> 端的开发者都不怎么喜欢（或者不怎么擅长）写这些模板、交互和样式代码。</p><p>在这种背景下，又出现了一种所谓<strong>套页面</strong>的开发模式：<strong>让专职的前端开发者切好静态页面，然后丢给后端开发者去仿照着静态页面写出模板，将需要动态变化的地方换成后端模板语法。</strong> 这时候的前端开发者也就是传说中的 “切图仔”（我在大三实习的时候经历过这种开发模式）。这种模式已经被证明是低效的，而且并没有合理的应用开发资源，开发效率很低。</p><p>在项目的开发、团队协作过程中，我们是要讲究效率的。那如何能够提高效率呢？让专业的人做专业的事、合适的事，分工协作。</p><p>所以，为了解决传统开发模式中的痛点，就衍生出了一种新的思路：<strong>让前后端的开发分离开来，独立开发，甚至可以做到独立部署。不同的角色只做好自己负责的事情，然后遵循某一种协作约定，分工协作，以达到高效产出。</strong></p><p>这就是前后端分离开发模式。</p><h3 id="三、前后端分离开发模式"><a href="#三、前后端分离开发模式" class="headerlink" title="三、前后端分离开发模式"></a>三、前后端分离开发模式</h3><p>前后端分离的开发模式图示如下：</p><p><img src="https://github.com/IDeepspace/ImageHosting/raw/master/FrontEnd/frontend-backend-development.jpg" alt="前后端分离开发模式" style="zoom:55%"></p><p><strong>在前后端分离的开发模式下，<code>Server</code> 端从数据库拿到元数据后，经过处理直接吐出数据（而不是页面模板），<code>Client</code> 端拿到数据后，在客户端进行模板渲染生成页面，最终呈现给用户。</strong></p><p>前后端分离之后，前端有了自己的服务器，不再需要依靠后端服务器来支持项目运行。如果在开发阶段，还可以使用 <code>mock</code> 数据（要先和后端开发者确定接口数据和结构），摆脱对后端接口的依赖，这样极大的提高了开发效率，系统分工也更加明确。</p><p>同时，此时服务端也不再处理模板，专注于数据与服务，职责也变得更加单一，专注度和效率也得到了大大的提升。</p><p>显而易见的是，前后端分离之后，前端开发需要做更多的事了。随着业务的增加和不断的变化，代码也会变得越来越复杂，代码量越来越多，这样就会催生出各种各样的前端框架，使得前端生态圈呈现大爆炸式的发展。</p><p>并且，随着移动互联网的快速发展，<strong>大前端</strong>也诞生出来了。简单来说，大前端就是所有前端的统称，比如<code>Android</code>、<code>iOS</code>、<code>Web</code>、<code>Watch</code> 等，然后将其最接近用户的那一层（ <code>UI</code> 层）统一起来，就是大前端。</p><p>由于 <code>NodeJS</code> 平台的崛起，前端开发可能已经不仅仅限于浏览器端的开发工作，借助 <code>NodeJS</code> 平台，以及<a href="http://expressjs.com/" target="_blank" rel="noopener">Express</a>、<a href="http://koajs.com/" target="_blank" rel="noopener">Koa</a>等框架，前端开发者也可以涉足服务端开发，这就要求我们具备一些后端开发思维。</p><h3 id="四、前后端分离需要考虑的事"><a href="#四、前后端分离需要考虑的事" class="headerlink" title="四、前后端分离需要考虑的事"></a>四、前后端分离需要考虑的事</h3><p>要实现前后端分离的，需要考虑很多事情。</p><h4 id="1、架构上分离解耦"><a href="#1、架构上分离解耦" class="headerlink" title="1、架构上分离解耦"></a>1、架构上分离解耦</h4><p>一般，我们会把前端应用部署在 <code>NodeJS</code>、<code>Nginx</code> 或者 <code>NodeJS</code> 和 <code>Nginx</code> 组合的服务器上，通过反向代理转发页面请求到后端服务器，相当于在传统的流程中加了 <code>NodeJS</code> 这一层。当然，也可以用 <code>NodeJS</code> 服务器来承担一部分负载均衡的工作，部分业务逻辑也可以放在 <code>NodeJS</code> 这一层来处理，例如：通过判断请求是来自 <code>PC</code> 端还是移动端的 <code>APP</code> ，将请求发到不同的后端服务器。</p><p>这里贴上淘宝前端团队提出的中途岛 （<code>Midway Framework</code>）架构图：</p><p><img src="https://github.com/IDeepspace/ImageHosting/raw/master/FrontEnd/taobao-midway-framework.png" alt="Midway Framework" style="zoom:67%"></p><p></p><p align="center">(图片来自网络)</p><br>不同的需求，架构也需要做不同程度的相应的调整。<p></p><h4 id="2、接口设计规范"><a href="#2、接口设计规范" class="headerlink" title="2、接口设计规范"></a>2、接口设计规范</h4><p>不管是瀑布模式的前后端分离，还是敏捷模式下的前后端分离，都需要从业务逻辑出发，从业务的角度来说，<code>Web</code> 应用的前后端是一个整体，它们无法独立运行。于是，我们的开发模式（也可以说是交互形式）就变成了下面这样：</p><p><img src="https://github.com/IDeepspace/ImageHosting/raw/master/FrontEnd/fe-be-alternate.jpg" alt="前后端交互" style="zoom:45%"></p><p>图中的 <code>API</code> 文档，可以是一个模拟后端接口的 <code>JSON API</code>，也可以是文档编写的 <code>API</code> 。在这个过程中，前后端需要根据业务逻辑需要展示的内容，一起细致化接口的每个字段名，直至接口确认完毕，当各种开发完成时，需要在测试环境进行集成。如果遇到 <code>API</code> 变更，我们需要重复这个过程。</p><p><code>API</code> 的设计、规范、安全、管理等，也都是我们需要认真考虑的问题（这部分内容会比较多，我打算后面单独写一篇来总结）。</p><h4 id="3、代码组织方式"><a href="#3、代码组织方式" class="headerlink" title="3、代码组织方式"></a>3、代码组织方式</h4><p>在传统架构模式中，前后端代码存放于同一个代码库中，甚至是同一工程目录下，页面中还夹杂着后端代码。前后端工程师进行开发时，都必须把整个项目导入到开发工具中。</p><p>而前后端分离模式在代码组织形式上，有以下两种:</p><ul><li><p><strong>半分离</strong></p><p>前后端共用一个代码库，但是代码分别存放在两个工程目录中。后端基本上不关心前端的东西。前端不需要知道后端的技术架构，后端也不需要知道前端的技术架构，前后端都有充分的自由采用各种技术来进行系统的性能优化。</p><p>但是这种形式有一个缺点，前后端不能独立部署。</p></li><li><p><strong>分离</strong></p><p>前后端代码库分离，前后端并行可发。在后端未准备好的情况下，可以使用 <code>Mock Server</code> （用于仿造后端接口的模拟 <code>HTTP</code> 服务器），为前端提供一个可用的 <code>API</code> 服务，支持前端的独立开发和测试。前后端可以独立部署。</p><p>那么是由前端还是后端来维护 <code>Mock Server</code> 呢？相对于前端开发人员来维护 <code>Mock Server</code>，由后端开发人员维护则会更加方便。因为后端是接口的提供方，他们是经验丰富的 <code>API</code> 编写者。当然，这中间也会有很多前后端的沟通工作，在维护 <code>Mock Server</code> 时，往往前后端开发者都有参与。</p></li></ul><h4 id="4、测试"><a href="#4、测试" class="headerlink" title="4、测试"></a>4、测试</h4><p>前后端分离之后，前端需要承担更多的工作了。代码量和复杂度都会上升，为了保证代码质量，我们需要增加更多的前端测试，搭建好测试服务。对于后端，测试也同样必不可少。</p><p>并且，我们可以为前后端增加契约测试。业务修改会带来一定量的 <code>API</code> 修改，一旦 <code>API</code> 修改了，就需要通知使用方（前端或者上下游第三方系统）。那么，<strong>最好的通知方式是什么呢？答案是持续集成失败。</strong> 持续集成一失败，它会以直接的状态（红色）告知你当前的构建是有问题的。</p><h3 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h3><p>前后端分离的好处很多，需要考虑的东西也还有很多，如跨域、静态资源路径问题等等，需要在实践中不断发现、解决。</p></div><hr><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.88rem}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{color:#fff}.reward-tabs .wechat-tab .active{color:#fff;background-color:#22ab38}.reward-tabs .alipay-tab .active{color:#fff;background-color:#019fe8}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"> <a class="reward-link btn-floating btn-large waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close"><i class="fa fa-close"></i></a><h4 class="reward-title">请我喝杯咖啡?</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs"><li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li><li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li></ul><div id="wechat"> <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div><div id="alipay"> <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码"></div></div></div></div></div></div><script>$(function(){$("#reward .reward-link").on("click",function(){$("#rewardModal").openModal()}),$("#rewardModal .close").on("click",function(){$("#rewardModal").closeModal()})})</script><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div></div><script src="/libs/share/js/social-share.min.js"></script><div class="reprint"><p> <span class="reprint-tip">转载请注明:</span> <a href="https://togoblog.cn" class="b-link-green">Deepspace</a><i class="fa fa-angle-right fa-lg fa-fw text-color"></i> <a href="/what-is-frontend-backend-separation/" class="b-link-green">Web 前端工程化（一） —— 什么是前后端分离？</a></p></div></div></div><div class="article" data-aos="fade-up"><div class="card relate-article-wrapper"><header class="relate-article-header">相关文章&nbsp;<i class="fa fa-arrow-right"></i></header><div class="relate-post-box"><div class="relate-post"> <span>1、</span><a id="relate-post-link" href="/set-up-ci-env-with-circleci-and-github/">使用 CircleCI + Github 搭建持续集成环境</a></div><div class="relate-post"> <span>2、</span><a id="relate-post-link" href="/what-is-ci-cd/">Web 前端工程化（二） —— CI/CD</a></div><div class="relate-post"> <span>3、</span><a id="relate-post-link" href="/micro-frontends/">微前端</a></div><div class="relate-post"> <span>4、</span><a id="relate-post-link" href="/reflow-and-repaint/">浏览器的重排和重绘</a></div><div class="relate-post"> <span>5、</span><a id="relate-post-link" href="/mvc-map-mvvm/">谈谈前端开发中的 MVC、MVP、MVVM 模式</a></div></div></div></div><div class="disqus-card card" data-aos="fade-up"><div id="disqus_thread" class="card-content"><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div><script type="text/javascript">
    disqus_config = function () {
        this.page.url = 'https://togoblog.cn/what-is-frontend-backend-separation/';
        this.page.identifier = '/what-is-frontend-backend-separation/';
        this.page.title = 'Web 前端工程化（一） —— 什么是前后端分离？';
    };
    let disqus_shortname = 'https-togoblog-cn';

    (function () { // DON'T EDIT BELOW THIS LINE
        let d = document, s = d.createElement('script');
        // 如：s.src = 'https://Deepspace.disqus.com/embed.js';
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script></div></div><div class="col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title">目录</div><div id="toc-content"></div></div></div></div><script src="/libs/tocbot/tocbot.min.js"></script><script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingSelector: 'h2, h3, h4, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script></main><footer class="page-footer bg-color"><div class="container row center-align"><div class="col s12 m8 l8 copy-right"> <span>COPYRIGHT 2020 DEEPSPACE. ALL RIGHTS RESERVED.</span></div><div class="col s12 m4 l4 social-link"><a href="https://github.com/IDeepspace" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fa fa-github"></i></a><a href="mailto:cxin1427@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fa fa-envelope-open"></i></a><a href="#!" class="tooltipped" data-tooltip="QQ: 690862036" data-position="top" data-delay="50"><i class="fa fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fa fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"> <span class="title">搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input" autofocus></div><div id="searchResult"></div></div></div><script src="/js/search.js"></script><script type="text/javascript">searchFunc("/search.xml","searchInput","searchResult")</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fa fa-angle-up"></i></a></div><script src="/libs/materialize/js/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script></body></html>