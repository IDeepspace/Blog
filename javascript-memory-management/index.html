<!DOCTYPE HTML><html lang="zh-CN"><head><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="keywords" content="JavaScript 的内存管理, Deepspace"><meta name="description" content="
一、内存Javascript 程序的运行，不管是依赖于浏览器还是 Node.js 环境，最终的运行都依赖于操作系统，而操作系统的运行依赖于计算机硬件资源。使用 Javascript 语言开发的程序最终会变成一条条指令和数据，要依赖于计算机"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>JavaScript 的内存管理 | Deepspace</title><link rel="icon" type="image/png" href="/favicon.png"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><script src="/libs/jquery/jquery-2.2.0.min.js"></script><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="container"><div class="nav-wrapper"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><span></span> <span class="logo-span">Deepspace</span></a></div><a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a><ul class="right"><li class="hide-on-med-and-down"><a href="/" class="waves-effect waves-light"><i class="fa fa-home"></i> <span>首页</span></a></li><li class="hide-on-med-and-down"><a href="/tags" class="waves-effect waves-light"><i class="fa fa-tags"></i> <span>标签</span></a></li><li class="hide-on-med-and-down"><a href="/categories" class="waves-effect waves-light"><i class="fa fa-bookmark"></i> <span>分类</span></a></li><li class="hide-on-med-and-down"><a href="/archives" class="waves-effect waves-light"><i class="fa fa-archive"></i> <span>归档</span></a></li><li class="hide-on-med-and-down"><a href="/about" class="waves-effect waves-light"><i class="fa fa-user-circle-o"></i> <span>关于</span></a></li><li><a id="toggleSearch" class="waves-effect waves-light"><i id="searchIcon" class="mdi-action-search"></i></a></li></ul><div class="side-nav" id="mobile-nav"><div class="mobile-head bg-color"><div class="logo-name">Deepspace</div><div class="logo-desc"> 凡事预 ？立 ：废</div></div><ul class="menu-list mobile-menu-list"><li><a href="/" class="waves-effect waves-light"><i class="fa fa-fw fa-home"></i> 首页</a></li><li><a href="/tags" class="waves-effect waves-light"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li><a href="/categories" class="waves-effect waves-light"><i class="fa fa-fw fa-bookmark"></i> 分类</a></li><li><a href="/archives" class="waves-effect waves-light"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li><a href="/about" class="waves-effect waves-light"><i class="fa fa-fw fa-user-circle-o"></i> 关于</a></li><li><div class="divider"></div></li><li><a href="https://github.com/IDeepspace" class="waves-effect waves-light" target="_blank"><i class="fa fa-github-square fa-fw"></i> Fork Me</a></li></ul><div class="social-link"><a href="https://github.com/IDeepspace" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fa fa-github"></i></a><a href="mailto:cxin1427@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fa fa-envelope-open"></i></a><a href="#!" class="tooltipped" data-tooltip="QQ: 690862036" data-position="top" data-delay="50"><i class="fa fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fa fa-rss"></i></a></div></div></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#202020;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style> <a href="https://github.com/IDeepspace" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewbox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a></nav></header><div class="bg-cover post-cover" style="background-image:url(/medias/featureimages/lighted.jpg)"><div class="container"><div class="row"><div class="col s12 m12 l12"><div class="brand"><div class="description center-align post-detail-title"> JavaScript 的内存管理</div></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1,#articleContent h2,#articleContent h3,#articleContent h4,#articleContent h5,#articleContent h6{padding-top:76px;margin-top:-76px}#articleContent h1{line-height:3.5rem}#articleContent h2{line-height:3.2rem}#articleContent h3{line-height:2.8rem}#articleContent h4{line-height:2.5rem}#articleContent h5{line-height:2.2rem}#articleContent h6{line-height:1.9rem}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px}#toc-content .is-active-link{color:#42b983}#toc-content .is-active-link::before{background-color:#42b983}</style><div class="row"><div class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="article-tag"> <a href="/tags/内存管理/" target="_blank"><span class="chip bg-color">内存管理</span></a></div><div class="post-info"><span class="post-cate"><i class="fa fa-bookmark fa-fw icon-category"></i> <a href="/categories/JavaScript/" class="post-category" target="_blank">JavaScript</a></span><span class="post-date"><i class="fa fa-clock-o fa-fw"></i> 2019-12-06</span></div></div><hr><div class="card-content article-card-content"><div id="articleContent"> <h3 id="一、内存"><a href="#一、内存" class="headerlink" title="一、内存"></a>一、内存</h3><p><code>Javascript</code> 程序的运行，不管是依赖于浏览器还是 <code>Node.js</code> 环境，最终的运行都依赖于操作系统，而操作系统的运行依赖于计算机硬件资源。使用 <code>Javascript</code> 语言开发的程序最终会变成一条条指令和数据，要依赖于计算机硬件的执行和存储。</p><p>比如两个变量执行加法运算， 就需要 <code>CPU</code> 运算单元的加法器提供支持，而参与运算数据的存储就要占用内存空间。</p><p>当然，计算机的硬件资源（<code>CPU</code> 的运算资源和缓存空间、内存条的内存空间等等）是有限的，不可能无限制的使用。所以，程序运行的时候产生的一些没用的中间数据，要及时的清理掉，释放出空间，留出的空间用以存储其他数据，这就是所谓的<strong>垃圾回收</strong>。</p><p>举个简单的例子：</p><p>我们要计算 <code>1+2+4</code> 的结果，那么 <code>1+2</code> 的和 <code>3</code> 就是一个临时数据，只用到它来加 <code>4</code> 得到最终结果 <code>7</code> 存在内存中，之后 <code>3</code> 就不会再占用具体的内存空间了。</p><a id="more"></a><h3 id="二、内存的生命周期"><a href="#二、内存的生命周期" class="headerlink" title="二、内存的生命周期"></a>二、内存的生命周期</h3><p>不管什么程序语言，内存生命周期基本是一致的：</p><ol><li><p>分配你所需要的内存</p></li><li><p>使用分配到的内存（读、写）</p></li><li><p>不需要时将其释放 / 归还</p></li></ol><p>像 <code>C</code> 语言这样的底层语言一般都有底层的内存管理接口，比如 <code>malloc()</code> 和 <code>free()</code>。相反，<code>JavaScript</code> 是在创建变量（对象，字符串等）时自动进行了分配内存，并且在不使用它们时<strong>自动释放</strong>。 释放的过程称为垃圾回收。这也让 <code>JavaScript</code>开发者错误的感觉可以不关心内存管理。</p><h3 id="二、内存分配"><a href="#二、内存分配" class="headerlink" title="二、内存分配"></a>二、内存分配</h3><p><strong>程序执行的时候内存空间会分为代码区和数据区，数据区又可以分为静态存储区和动态存储区，动态存储区又可以分为堆区和栈区。</strong> 如下图：</p><p><img src="https://raw.githubusercontent.com/IDeepspace/ImageHosting/master/JavaScript/javascript-memory-management.jpg" alt="javascript-memory-management.png" style="zoom:50%"></p><p>以下面的代码为例，分别对几个名字做一下简单介绍：</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//常量 PI，分配在静态存储区</span>
<span class="token keyword">const</span> PI <span class="token operator">=</span> <span class="token number">3.1415926</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//全局变量 S，分配在静态存储区</span>
<span class="token keyword">let</span> S <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//局部变量 i，分配在栈区</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  S <span class="token operator">+</span><span class="token operator">=</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// 字符串数据分配在栈区</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// 数组数据分配在堆区，数据的地址变量 arr 分配在栈区</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// 对象数据分配在堆区，数据的地址变量 obj 分配在栈区</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><ul><li><p>代码区</p><ul><li><code>Javascript</code> 代码要想被 <code>CPU</code> 执行，都要被编译处理成 <code>CPU</code> 可以读取运行的指令（<code>CPU</code> 都有自己硬件层面的指令集）。</li><li>代码区存放的是 <code>for</code>、<code>if</code>、<code>while</code> 等程序结构经过解析编译处理后存放在内存中的程序指令，这些程序指令可以控制 <code>CPU</code> 的运行，<code>CPU</code> 中有相关的寄存器可以处理这些程序指令（具体的内部硬件原理我们可以不用管， 只需要知道代码区存储的二进制程序指令可以控制 <code>CPU</code> 的状态）。比如代码中定义的 <code>for</code> 循环结构，它的功能就是多次循环执行里面包裹的的加法运算。在初始化 <code>Javascript</code> 代码的时候， <code>for</code> 循环程序会被处理为一条一条的程序指令存放在内存的代码区，当 <code>CPU</code> 的程序计数器指向内存中代码区程序指令的时候，就会循环调用自己的硬件加法器完成相关的运算。</li></ul></li><li><p>数据区</p><ul><li>数据区就是存储数据的。具体来说就是：声明的变量、字符串、数据等数据，<code>CPU</code> 在运算的时候会从内存中取出对应的数据，同时，计算出的数据也会存入内存。</li></ul></li><li><p>静态存储区</p><ul><li>处理 <code>Javascript</code> 代码的时候，浏览器会在内存静态存储区开辟空间存储常量 <code>PI</code>， 使用 <code>const</code> 声明 <code>PI</code> 主要是为了编写程序方便，圆周率 <code>3.1415926</code> 是定值，每次调用麻烦。编写程序的时候使用 <code>const</code> 声明一次，<code>PI</code> 这个符号就可以代表圆周率，凡是程序中出现 <code>PI</code> 的地方，就会默认它是 <code>3.1415926</code> 。</li><li><code>const</code> 就是一个标识符号。当浏览器或者 <code>nodejs</code> 阅读到它的时候，就知道要 <code>const</code> 声明的数据存储到内存静态存储区，只要程序处于运行状态它都存在于内存中，也就是说常量生命周期贯穿整个程序运行期间，除非程序退出。比如关闭浏览器时，内存中静态存储区的数据就会清空释放，但是全局变量 <code>S</code> 和常量<code>PI</code> 一样也会存储在内存静态存储区。</li></ul></li><li><p>栈</p><ul><li><p>当 <code>CPU</code> 指向 <code>for</code> 关键字定义的程序被处理后存储在内存代码区的程序指令，就会在内存数据区开辟空间存储局部变量 <code>i</code>，具体点就是数据区动态存储区的栈区。</p></li><li><p>当 <code>for</code> 循环程序执行结束的时候，变量 <code>i</code> 就会被销毁，释放栈区空间。</p></li><li><p>从这里可以看出栈区数据的生命周期很短，在这个过程中，静态存储区存放的全局变量 <code>S</code> 的值经过多次加法赋值运算已经发生了变化，只要整体 <code>Javascript</code> 程序不退出它就会一直存在。讲到这里， 你应该会更加深刻理解局部变量和全局变量了，全局变量的生存状态依赖于整个 <code>Javascript</code> 程序，局部变量的存在依赖于局部一个程序段，比如一个函数中的局部变量，<code>if</code> 语句中的局部变量，<code>for</code> 循环结构程序中的局部变量。</p></li><li><p>示意图：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'陈星星'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> city <span class="token operator">=</span> <span class="token string">'Wuhan'</span><span class="token punctuation">;</span>
</code></pre><p><img src="https://github.com/IDeepspace/ImageHosting/raw/master/JavaScript/javascript-memory-management-stack.jpg" alt="img" style="zoom:50%"></p></li></ul></li><li><p>堆</p><ul><li><p>上面的代码中有一个函数，函数里初始化了一个数组，这个时候，<code>CPU</code> 就会在内存数据区开辟内存空间存储一个新的数组，具体来说就是数组被存储到了动态内存的堆区。</p></li><li><p>但是数组的地址 <code>arr</code> 被存储到栈区，<code>CPU</code> 通过栈区数组的地址 可以访问堆区的数据数据，比如 <code>arr[0]</code> 指针指向数组的第一个元素。这里你可以看出访问堆区的数据要经过一个中间区栈区，说明栈区数据的执行效率高。</p></li><li><p>计算机的硬件资源是有限的，<code>CPU</code> 的运算能力是有限的，所以要优化算法；内存的存储空间是有限的， 因此要对内存进行合理分配。比如局部变量分配在栈区可以快速调用，调用结束然后迅速清除释放。</p></li><li><p>堆区的数据清除和释放与栈区有所不同，栈区数据释放比较简单，只要局部变量的相关程序执行完毕，它就释放。也就是说被释放的数据属于垃圾数据（没有用的数据），那么堆区的数据如何判断是垃圾数据？<strong>堆区的数据的访问是通过栈区的地址，如果栈区的地址不再指向堆区中的数据，那么 <code>Javascript</code> 的解释器就会把该数据占用的内存区域清空释放，<code>Javascript</code> 语言运行的浏览器 或 <code>nodejs</code> 平台都会按照一定的规则自动检测堆区数据，一旦发现垃圾数据就会释放，一般不需要程序员手动释放内存（如果是 <code>C++</code> 和 <code>C</code> 语言需要程序员手动释放）。</strong>不过有些时候还是需要程序员手动干预，对于简单的工程，浏览器队都会自动管理内存，不过复杂的工程还是需要程序员对内存分配、管理有深入的认识。</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// arr等于空指针，释放内存</span>
arr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre><p><code>null</code> 是一个空值，空指针，一般用于释放堆区数据。<code>arr</code> 原本指向堆区的数组数据，但是你重新给 <code>arr</code> 赋值为空指针，不再指向 <code>arr</code> 数组，那么该数组占据的内存空间就会被释放。</p></li><li><p>示意图：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'陈星星'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Deepspace'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person3 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'陈鑫'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p><img src="https://github.com/IDeepspace/ImageHosting/raw/master/JavaScript/javascript-memory-management-heap.jpg" alt="img" style="zoom:50%"></p></li></ul></li></ul><p>看下面的示例代码，比较基本类型数据与引用类型的数据有什么区别。</p><p>引用类型的数据在堆区中释放的算法，<code>Javascript</code> 程序会对数组等引用数据的引用数量计数，一旦没有引用，就会被清除释放。</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// 声明一个变量a，赋值10</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// 重新开辟内存空间存放b并把a的值10赋值给b</span>
  <span class="token keyword">const</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// 变量a原来的值10被覆盖重新更改为20，b的值不受影响</span>
  a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a:'</span> <span class="token operator">+</span> a<span class="token punctuation">,</span> <span class="token string">'b:'</span> <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// 声明数组存放在堆区，数组地址存放在栈区</span>
  <span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// 声明一个变量 arr2 存储在栈区，作为一个指针，和 arr1 一样指向同一个数组</span>
  <span class="token keyword">let</span> arr2 <span class="token operator">=</span> arr1<span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// arr2.push(2);和 arr1.push(2);作用相同都会改变数组结构</span>
  <span class="token comment" spellcheck="true">// arr1 和 arr2 指的都是同一个数组</span>
  arr1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// 变量 arr2 指向新的数据obj对象</span>
  <span class="token comment" spellcheck="true">// 注意这不会改变原来的数组，此时 arr2 指向的数组只是少了一个引用</span>
  arr2 <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// 注意此时 arr1 和 arr2 指向的数组都指向了别的对区数据，数组的引用为 0，被清除释放</span>
  arr1 <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.88rem}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{color:#fff}.reward-tabs .wechat-tab .active{color:#fff;background-color:#22ab38}.reward-tabs .alipay-tab .active{color:#fff;background-color:#019fe8}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"> <a class="reward-link btn-floating btn-large waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close"><i class="fa fa-close"></i></a><h4 class="reward-title">请我喝杯咖啡?</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs"><li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li><li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li></ul><div id="wechat"> <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div><div id="alipay"> <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码"></div></div></div></div></div></div><script>$(function(){$("#reward .reward-link").on("click",function(){$("#rewardModal").openModal()}),$("#rewardModal .close").on("click",function(){$("#rewardModal").closeModal()})})</script><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div></div><script src="/libs/share/js/social-share.min.js"></script><div class="reprint"><p> <span class="reprint-tip">转载请注明:</span> <a href="https://togoblog.cn" class="b-link-green">Deepspace</a><i class="fa fa-angle-right fa-lg fa-fw text-color"></i> <a href="/javascript-memory-management/" class="b-link-green">JavaScript 的内存管理</a></p></div></div></div><div class="article" data-aos="fade-up"><div class="card relate-article-wrapper"><header class="relate-article-header">相关文章&nbsp;<i class="fa fa-arrow-right"></i></header><div class="relate-post-box"><div class="relate-post"> <span>1、</span><a id="relate-post-link" href="/es6-let-const/">ES6 —— let 和 const</a></div><div class="relate-post"> <span>2、</span><a id="relate-post-link" href="/es6-set-map/">ES6 —— Set 和 Map 的数据结构</a></div><div class="relate-post"> <span>3、</span><a id="relate-post-link" href="/es6-string/">ES6 —— 模板字符串</a></div><div class="relate-post"> <span>4、</span><a id="relate-post-link" href="/javascript-passing-by-value/">JavaScript 中的值传递</a></div><div class="relate-post"> <span>5、</span><a id="relate-post-link" href="/array-like-object/">JavaScript 中的类数组对象（array-like objects）</a></div></div></div></div><div class="disqus-card card" data-aos="fade-up"><div id="disqus_thread" class="card-content"><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div><script type="text/javascript">
    disqus_config = function () {
        this.page.url = 'https://togoblog.cn/javascript-memory-management/';
        this.page.identifier = '/javascript-memory-management/';
        this.page.title = 'JavaScript 的内存管理';
    };
    let disqus_shortname = 'https-togoblog-cn';

    (function () { // DON'T EDIT BELOW THIS LINE
        let d = document, s = d.createElement('script');
        // 如：s.src = 'https://Deepspace.disqus.com/embed.js';
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script></div></div><div class="col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title">目录</div><div id="toc-content"></div></div></div></div><script src="/libs/tocbot/tocbot.min.js"></script><script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingSelector: 'h2, h3, h4, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script></main><footer class="page-footer bg-color"><div class="container row center-align"><div class="col s12 m8 l8 copy-right"> <span>COPYRIGHT 2020 DEEPSPACE. ALL RIGHTS RESERVED.</span></div><div class="col s12 m4 l4 social-link"><a href="https://github.com/IDeepspace" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fa fa-github"></i></a><a href="mailto:cxin1427@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fa fa-envelope-open"></i></a><a href="#!" class="tooltipped" data-tooltip="QQ: 690862036" data-position="top" data-delay="50"><i class="fa fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fa fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"> <span class="title">搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input" autofocus></div><div id="searchResult"></div></div></div><script src="/js/search.js"></script><script type="text/javascript">searchFunc("/search.xml","searchInput","searchResult")</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fa fa-angle-up"></i></a></div><script src="/libs/materialize/js/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script></body></html>