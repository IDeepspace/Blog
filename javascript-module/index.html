<!DOCTYPE HTML><html lang="zh-CN"><head><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="keywords" content="JavaScript 模块化, Deepspace"><meta name="description" content="JavaScript 模块化JavaScript 模块化的发展历史：无模块化 –&amp;gt; CommonJS 规范 –&amp;gt; AMD 规范 –&amp;gt; CMD 规范 –&amp;gt; ES6 模块化。
下面我们根据这个发展历史来讲解 JavaSc"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>JavaScript 模块化 | Deepspace</title><link rel="icon" type="image/png" href="/favicon.png"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><script src="/libs/jquery/jquery-2.2.0.min.js"></script><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="container"><div class="nav-wrapper"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><span></span> <span class="logo-span">Deepspace</span></a></div><a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a><ul class="right"><li class="hide-on-med-and-down"><a href="/" class="waves-effect waves-light"><i class="fa fa-home"></i> <span>首页</span></a></li><li class="hide-on-med-and-down"><a href="/tags" class="waves-effect waves-light"><i class="fa fa-tags"></i> <span>标签</span></a></li><li class="hide-on-med-and-down"><a href="/categories" class="waves-effect waves-light"><i class="fa fa-bookmark"></i> <span>分类</span></a></li><li class="hide-on-med-and-down"><a href="/archives" class="waves-effect waves-light"><i class="fa fa-archive"></i> <span>归档</span></a></li><li class="hide-on-med-and-down"><a href="/about" class="waves-effect waves-light"><i class="fa fa-user-circle-o"></i> <span>关于</span></a></li><li><a id="toggleSearch" class="waves-effect waves-light"><i id="searchIcon" class="mdi-action-search"></i></a></li></ul><div class="side-nav" id="mobile-nav"><div class="mobile-head bg-color"><div class="logo-name">Deepspace</div><div class="logo-desc"> 凡事预 ？立 ：废</div></div><ul class="menu-list mobile-menu-list"><li><a href="/" class="waves-effect waves-light"><i class="fa fa-fw fa-home"></i> 首页</a></li><li><a href="/tags" class="waves-effect waves-light"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li><a href="/categories" class="waves-effect waves-light"><i class="fa fa-fw fa-bookmark"></i> 分类</a></li><li><a href="/archives" class="waves-effect waves-light"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li><a href="/about" class="waves-effect waves-light"><i class="fa fa-fw fa-user-circle-o"></i> 关于</a></li><li><div class="divider"></div></li><li><a href="https://github.com/IDeepspace" class="waves-effect waves-light" target="_blank"><i class="fa fa-github-square fa-fw"></i> Fork Me</a></li></ul><div class="social-link"><a href="https://github.com/IDeepspace" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fa fa-github"></i></a><a href="mailto:cxin1427@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fa fa-envelope-open"></i></a><a href="#!" class="tooltipped" data-tooltip="QQ: 690862036" data-position="top" data-delay="50"><i class="fa fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fa fa-rss"></i></a></div></div></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#202020;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style> <a href="https://github.com/IDeepspace" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewbox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a></nav></header><div class="bg-cover post-cover" style="background-image:url(/medias/featureimages/lighted.jpg)"><div class="container"><div class="row"><div class="col s12 m12 l12"><div class="brand"><div class="description center-align post-detail-title"> JavaScript 模块化</div></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1,#articleContent h2,#articleContent h3,#articleContent h4,#articleContent h5,#articleContent h6{padding-top:76px;margin-top:-76px}#articleContent h1{line-height:3.5rem}#articleContent h2{line-height:3.2rem}#articleContent h3{line-height:2.8rem}#articleContent h4{line-height:2.5rem}#articleContent h5{line-height:2.2rem}#articleContent h6{line-height:1.9rem}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px}#toc-content .is-active-link{color:#42b983}#toc-content .is-active-link::before{background-color:#42b983}</style><div class="row"><div class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="article-tag"> <a href="/tags/Ajax/" target="_blank"><span class="chip bg-color">Ajax</span></a></div><div class="post-info"><span class="post-cate"><i class="fa fa-bookmark fa-fw icon-category"></i> <a href="/categories/JavaScript/" class="post-category" target="_blank">JavaScript</a></span><span class="post-date"><i class="fa fa-clock-o fa-fw"></i> 2019-06-29</span></div></div><hr><div class="card-content article-card-content"><div id="articleContent"><h2 id="JavaScript-模块化"><a href="#JavaScript-模块化" class="headerlink" title="JavaScript 模块化"></a>JavaScript 模块化</h2><p><code>JavaScript</code> 模块化的发展历史：无模块化 –&gt; <code>CommonJS</code> 规范 –&gt; <code>AMD</code> 规范 –&gt; <code>CMD</code> 规范 –&gt; <code>ES6</code> 模块化。</p><p>下面我们根据这个发展历史来讲解 <code>JavaScript</code> 模块化的内容。</p><h3 id="一、无模块化"><a href="#一、无模块化" class="headerlink" title="一、无模块化"></a>一、无模块化</h3><pre class="language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"jquery.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"jquery_scroller.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"main.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"other1.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"other2.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"other3.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre><p>即简单的将所有的 <code>js</code> 文件统统放在一起。但是这些<strong>文件的顺序不能出错</strong>，比如 <code>jquery</code> 需要先引入，才能引入 <code>jquery</code> 插件。缺点很明显：</p><ul><li>污染全局作用域</li><li>维护成本高</li><li>依赖关系不明显</li></ul><a id="more"></a><h3 id="二、原始写法"><a href="#二、原始写法" class="headerlink" title="二、原始写法"></a>二、原始写法</h3><p>在一些模块化的规范出现之前，我们想要达到模块化的效果可能有这么三种：</p><h4 id="1、一个函数就是一个模块"><a href="#1、一个函数就是一个模块" class="headerlink" title="1、一个函数就是一个模块"></a>1、一个函数就是一个模块</h4><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
  <span class="token keyword">function</span> m1 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> m2 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// ...</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><p>缺点：污染了全局变量，无法保证不会与其它模块发生冲突，而且模块成员之间看不出直接关系。</p><h4 id="2、一个对象就是一个模块"><a href="#2、一个对象就是一个模块" class="headerlink" title="2、一个对象就是一个模块"></a>2、一个对象就是一个模块</h4><p>对象写法为了解决上面的缺点，可以把模块写成一个对象，所有的模块成员都放到这个对象里面。</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
  <span class="token keyword">var</span> module1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    _sum<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    foo1<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    foo2<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><p>缺点：会暴露所有模块成员，内部的状态可能被改写。例如，我们如果只是想暴露出两个方法而不暴露出 <code>_sum</code>，就做不到。</p><p>而此时，<code>_sum</code> 也可能被外部改写：</p><pre><code>module1._sum = 2;
</code></pre><h4 id="3、立即执行函数为一个模块"><a href="#3、立即执行函数为一个模块" class="headerlink" title="3、立即执行函数为一个模块"></a>3、立即执行函数为一个模块</h4><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
  <span class="token keyword">var</span> module1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> foo1 <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> foo2 <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      foo1<span class="token punctuation">:</span> foo1<span class="token punctuation">,</span>
      foo2<span class="token punctuation">:</span> foo2
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><p>利用立即执行函数内的作用域已经闭包来实现模块功能，导出我们想要导出的成员。</p><p>此时外部代码就不能读取到 <code>_sum</code> 了：</p><pre class="language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module1<span class="token punctuation">.</span>_sum<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// undefined</span>
</code></pre><h3 id="三、CommonJS-规范"><a href="#三、CommonJS-规范" class="headerlink" title="三、CommonJS 规范"></a>三、CommonJS 规范</h3><p>该规范最初是用在服务器端的 <code>node.js</code> 中的，下面我们看看如何使用 <code>CommonJS</code> 规范来定义和引用模块。</p><h4 id="1、定义模块"><a href="#1、定义模块" class="headerlink" title="1、定义模块"></a>1、定义模块</h4><p>定义模块有两种方式：</p><ul><li><code>module.exports = {}</code></li><li><code>exports.xxx = &#39;xxx&#39;</code></li></ul><p>第一种定义方式：</p><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Alex'</span><span class="token punctuation">,</span>
    sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
<span class="token punctuation">}</span>
</code></pre><p>第二种定义方式：</p><pre class="language-javascript"><code class="language-javascript">exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Alex'</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'boy'</span>
</code></pre><h4 id="2、容易混淆的定义方式"><a href="#2、容易混淆的定义方式" class="headerlink" title="2、容易混淆的定义方式"></a>2、容易混淆的定义方式</h4><p>如果在代码中试图 <code>exports = { name: &#39;Alex&#39; }</code>，会发现在引入的地方根本获取不到 <code>name</code> 属性。</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// m1.js</span>
exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Alex'</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">// test.js</span>
<span class="token keyword">const</span> math <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1.js'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// {}</span>
</code></pre><p>在控制台执行 <code>node test.js</code>，发现打印出来的 <code>m1</code> 是一个空的对象。</p><p>所以，在 <code>CommonJS</code> 中，整个模块的导出是靠 <code>module.exports</code> 的，如果你重新对整个 <code>exports</code> 对象赋值的话，它和 <code>module.exports</code> 就不是同一个对象了，因为它们指向的引用地址都不同：</p><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// 指向一个空的对象</span>
exports <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Alex'</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// 指向的是另一个对象</span>
</code></pre><p>所以对 <code>exports = {}</code> 做任何操作都影响不到 <code>module.exports</code>。</p><p><strong>下面再看几个正确和错误的示例：</strong></p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// m1.js</span>
<span class="token comment" spellcheck="true">// 1. 正确</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Alex'</span><span class="token punctuation">,</span>
  sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 2. 正确</span>
exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Alex'</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'boy'</span>

<span class="token comment" spellcheck="true">// 3. 正确</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'lindaidai'</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'boy'</span>

<span class="token comment" spellcheck="true">// 4. 无效</span>
exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'lindaidai'</span><span class="token punctuation">,</span>
  sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
<span class="token punctuation">}</span>
</code></pre><p>可以看到</p><ul><li><code>exports.name = xxx</code> 是 <code>module.exports.name = xxx</code> 的缩写。</li><li><code>exports = {}</code> 却不是 <code>module.exports = {}</code> 的缩写。</li></ul><h4 id="2、引用模块"><a href="#2、引用模块" class="headerlink" title="2、引用模块"></a>2、引用模块</h4><p>对于模块的引用使用全局方法 <code>require()</code> 就可以了。</p><blockquote><p>注意：这个全局方法 <code>require()</code> 是 <code>node</code> 中的方法，它不是 <code>window</code>下面的，所以如果没做任何处理想直接在 <code>html</code> 里用肯定就是不行的了。</p></blockquote><p>例如下面这样：</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
        <span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1.js'</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
</code></pre><p>打开页面控制台肯定就报错了：</p><pre class="language-javascript"><code class="language-javascript">Uncaught ReferenceError<span class="token punctuation">:</span> require is not defined
    at index<span class="token punctuation">.</span>html<span class="token punctuation">:</span><span class="token number">11</span>
</code></pre><p>而如果是在另一个 <code>js</code> 文件中引用，并在终端执行是可以用的：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1.js'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>所以，<strong><code>require()</code> 是 <code>Node.js</code> 中的一个全局方法</strong>，并不是 <code>CommonJS</code> 独有的，<code>CommonJS</code> 只是众多规范中的其中一种。</p><p><strong>小结</strong></p><p><code>CommonJS</code> 规范允许我们：</p><ul><li>使用 <code>module.exports = {}</code> 或者 <code>exports.name = xxx</code> 导出模块</li><li>使用 <code>const m1 = require(&#39;./m1&#39;)</code> 引入模块</li></ul><h4 id="3、CommonJS-规范的特点"><a href="#3、CommonJS-规范的特点" class="headerlink" title="3、CommonJS 规范的特点"></a>3、CommonJS 规范的特点</h4><ul><li>所有代码都运行在模块作用域，不会污染全局作用域；</li><li>模块是同步加载的，即只有加载完成，才能执行后面的操作；</li><li>模块在首次执行后就会缓存，再次加载只返回缓存结果，如果想要再次执行，可清除缓存；</li><li><code>CommonJS</code> 输出是值的拷贝，即 <strong><code>require</code> 返回的值是被输出的值的拷贝</strong>，模块内部的变化也不会影响这个值。</li></ul><p>第一个特点就不用多说了，下面我们来看看剩下的这三个特点。</p><h5 id="3-1、同步加载"><a href="#3-1、同步加载" class="headerlink" title="3.1、同步加载"></a>3.1、同步加载</h5><p>写个案例验证一下。</p><p><em>m1.js</em></p><pre class="language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是m1模块'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Alex'</span><span class="token punctuation">,</span>
  sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
<span class="token punctuation">}</span>
</code></pre><p><em>test.js</em></p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是test模块'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>可以看到，<code>test</code> 模块依赖于 <code>m1</code>，并且是先下载的 <code>m1</code> 模块，所以如果我执行 <code>node test.js</code>，会有以下的执行结果：</p><pre><code>我是m1模块
我是test模块
</code></pre><p>这也就验证了<code>CommonJS</code> 中，模块是同步加载的，即只有加载完成，才能执行后面的操作。</p><h5 id="3-2、模块首次执行后会缓存"><a href="#3-2、模块首次执行后会缓存" class="headerlink" title="3.2、模块首次执行后会缓存"></a>3.2、模块首次执行后会缓存</h5><p><em>m1.js</em>:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Alex'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sex <span class="token operator">=</span> <span class="token string">'boy'</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
</code></pre><p><em>test.js</em>:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m1<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'girl'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> m2 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><code>test</code> 同样依赖于 <code>m1</code>，但是我们在其中导入两次 <code>m1</code>，第一次导入的时候修改了 <code>m1.sex</code> 的值，第二次的时候命名为 <code>m2</code>，但是结果 <code>m1</code> 和 <code>m2</code> 竟然是相等的：</p><pre><code>{ name: &#39;Alex&#39;, sex: &#39;girl&#39; }
{ name: &#39;Alex&#39;, sex: &#39;girl&#39; }
</code></pre><p>也就是说<strong>模块在首次执行后就会缓存，再次加载只返回缓存结果</strong>。</p><p>这里可能会有<strong>疑惑</strong>：因为改变了 <code>m1.sex</code> 也可能是影响原本 <code>m1</code> 模块里的 <code>sex</code> 属性，这样的话第二次 <code>m2</code> 拿到的肯定就是被改变的值了。</p><p><code>CommonJS</code> 的下面这个特点可以解答这个疑惑。</p><h5 id="3-3、CommonJS-输出是值的拷贝"><a href="#3-3、CommonJS-输出是值的拷贝" class="headerlink" title="3.3、CommonJS 输出是值的拷贝"></a>3.3、CommonJS 输出是值的拷贝</h5><p><code>CommonJS</code> 输出是值的拷贝，也就是说<strong>用 <code>require()</code> 引入了模块，在最新的模块中怎样去改变，也不会影响到已经 <code>require()</code> 的模块</strong>。看下面的例子：</p><p><em>m1.js</em>:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Alex'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sex <span class="token operator">=</span> <span class="token string">'boy'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> advantage <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'handsome'</span><span class="token punctuation">]</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  sex <span class="token operator">=</span> <span class="token string">'girl'</span><span class="token punctuation">;</span>
  advantage<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'cute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>

exports<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>advantage <span class="token operator">=</span> advantage<span class="token punctuation">;</span>
</code></pre><p><em>test.js</em>:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'read count after 1000ms in commonjs is'</span><span class="token punctuation">,</span> m1<span class="token punctuation">.</span>sex<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'read count after 1000ms in commonjs is'</span><span class="token punctuation">,</span> m1<span class="token punctuation">.</span>advantage<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre><p>执行 <code>node test.js</code> 之后的执行结果是：</p><pre class="language-javascript"><code class="language-javascript">read count after 1000ms <span class="token keyword">in</span> commonjs is boy
read count after 1000ms <span class="token keyword">in</span> commonjs is <span class="token punctuation">[</span> <span class="token string">'handsome'</span><span class="token punctuation">,</span> <span class="token string">'cute'</span> <span class="token punctuation">]</span>
</code></pre><p>也就是说，在开始 <code>var m1 = require(&#39;./m1&#39;)</code> 的时候，<code>m1</code> 已经被引入进来了，但是过了 <code>500ms</code> 后改变了原本 <code>m1</code> 里的一些属性，<code>sex</code> 这种基本数据类型是不会被改变的，但是 <code>advantage</code> 这种引用类型共用的还是同一个内存地址，所以值发生了改变（<strong>对于引用类型的数据，值的拷贝是内存地址</strong>）。</p><p>如果这里你是这样写的话：</p><p><em>m1.js</em>:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Alex'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sex <span class="token operator">=</span> <span class="token string">'boy'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> advantage <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'handsome'</span><span class="token punctuation">]</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  sex <span class="token operator">=</span> <span class="token string">'girl'</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// advantage.push('cute');</span>
  advantage <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'cute'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>

exports<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>advantage <span class="token operator">=</span> advantage<span class="token punctuation">;</span>
</code></pre><p>现在的执行结果肯定就是：</p><pre class="language-javascript"><code class="language-javascript">read count after 1000ms <span class="token keyword">in</span> commonjs is boy
read count after 1000ms <span class="token keyword">in</span> commonjs is <span class="token punctuation">[</span> <span class="token string">'handsome'</span> <span class="token punctuation">]</span>
</code></pre><p>因为相当于对 <code>m1</code> 的 <code>advantage</code> 重新赋值了，地址发生了改变，这种情况下就不会影响到已经 <code>require()</code> 的模块。</p><p><strong>小结：</strong></p><ol><li>对于基本数据类型，属于复制。即会被模块缓存。同时，在另一个模块可以对该模块输出的变量重新赋值。</li><li>对于引用类型，属于浅拷贝。由于两个模块引用的对象指向同一个内存空间，因此对该模块的值做修改时会影响另一个模块。</li></ol><h3 id="四、AMD-规范"><a href="#四、AMD-规范" class="headerlink" title="四、AMD 规范"></a>四、AMD 规范</h3><h4 id="1、产生原因"><a href="#1、产生原因" class="headerlink" title="1、产生原因"></a>1、产生原因</h4><p>我们知道，模块化这种概念不仅仅适用于服务器端，客户端同样也适用。</p><p>而 <code>CommonJS</code> 规范就不适合用在客户端（浏览器）环境了，比如上面的那个例子，也就是:</p><p><em>test.js</em></p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 与m1模块无关的一些代码</span>
<span class="token keyword">function</span> other <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">other</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>由于 <strong><code>CommonJS</code> 同步加载</strong>的特点，后面的内容要等待 <code>m1</code> 加载完才会执行，如果 <code>m1</code> 加载的很慢就造成了卡顿，这对于客户端来说肯定是不友好的。这里我们更希望的是 <code>other()</code> 的执行不需要等 <code>m1</code> 加载完才执行，也就是我们希望 <code>m1</code> 它是<strong>「异步加载」</strong>的，这就是 <code>AMD</code> 规范的特点。</p><p><strong><code>require.js</code> 这个 <code>JavaScript</code> 库实现了 <code>AMD</code> 规范</strong>，下面我们来使用它。</p><h4 id="2、定义模块"><a href="#2、定义模块" class="headerlink" title="2、定义模块"></a>2、定义模块</h4><p><code>AMD</code> 是 <code>Asynchronous Module Definition</code> 的缩写，也就是「<strong>异步模块定义</strong>」。</p><p><code>AMD</code> 规范中使用 <code>define</code> 来定义一个模块。</p><p><em>math.js</em></p><pre class="language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    add<span class="token punctuation">:</span> add
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>这里模块很简单，导出了一个加法函数。</p><h4 id="3、引用模块"><a href="#3、引用模块" class="headerlink" title="3、引用模块"></a>3、引用模块</h4><p>在 <code>test.js</code> 中引入了 <code>math</code> 模块并调用<code>add()</code>方法：</p><p><strong>test.js</strong>:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> requirejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"requirejs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//引入requirejs模块</span>

<span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'math'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>在使用 <code>require.js</code> 的时候，我们必须要提前加载所有的依赖，然后才可以使用，而不是需要使用时再加载。</p><h4 id="4、依赖其它模块的-define"><a href="#4、依赖其它模块的-define" class="headerlink" title="4、依赖其它模块的 define"></a>4、依赖其它模块的 define</h4><p><em>m1.js</em></p><pre class="language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是m1, 我被加载了...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Alex'</span><span class="token punctuation">,</span>
    sex<span class="token punctuation">:</span> <span class="token string">'boy'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><em>math.js</em></p><pre class="language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'m1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>m1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是math, 我被加载了...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> print <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    add<span class="token punctuation">,</span>
    print<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><em>test.js</em></p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> requirejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'requirejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 引入requirejs模块</span>

<span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'math'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是test, 我被加载了...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  math<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">other</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是test模块内的, 但是我不依赖math'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">other</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>执行结果：</p><pre class="language-bash"><code class="language-bash">$ node test.js
我是test模块内的, 但是我不依赖math
我是m1, 我被加载了<span class="token punctuation">..</span>.
我是math, 我被加载了<span class="token punctuation">..</span>.
我是test, 我被加载了<span class="token punctuation">..</span>.
3
Alex
</code></pre><h4 id="5、特点"><a href="#5、特点" class="headerlink" title="5、特点"></a>5、特点</h4><p>优点：适合在浏览器环境中异步加载模块、并行加载多个模块；</p><p>缺点：不能按需加载、开发成本大</p><h3 id="五、CMD-规范"><a href="#五、CMD-规范" class="headerlink" title="五、CMD 规范"></a>五、CMD 规范</h3><p><code>AMD</code> 推崇依赖前置、提前执行，<code>CMD</code> （<code>Common Module Definition</code>）推崇依赖就近、延迟执行。</p><blockquote><p><code>CMD</code> 是 <code>SeaJS</code> 在推广过程中对模块定义的规范化产出。</p></blockquote><p>来看段代码，大概感受一下它是怎样用的：</p><pre><code>define(function(require, exports, module) {
  var math = require(&#39;./math&#39;);
  math.print()
})
</code></pre><p>和 <code>AMD</code> 很像。<code>AMD</code> 和 <code>CMD</code> 最大的区别是<strong>对依赖模块的执行时机处理不同</strong>。</p><blockquote><p>注意不是加载的时机或者方式不同，二者皆为异步加载模块。</p></blockquote><p>还是前面的例子，同样是 <code>math</code> 模块中需要加载 <code>m1</code> 模块。</p><p>在 <code>AMD</code> 中我们会这样写：</p><p><em>math.js</em></p><pre class="language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'m1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>m1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是math, 我被加载了...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> print <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    add<span class="token punctuation">,</span>
    print<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>但是对于 <code>CMD</code>，我们会这样写：</p><p><em>math.js</em></p><pre class="language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是math, 我被加载了...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> print <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    add<span class="token punctuation">,</span>
    print<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>假如此时 <code>m1.js</code> 中有一个语句是在 <code>m1</code> 模块被加载的时候打印出 <code>&quot;我是m1, 我被加载了...&quot;</code>。</p><p>执行结果区别：</p><ul><li><code>AMD</code>，会先加载 <code>m1</code>，<code>console.log(&#39;我是m1, 我被加载了...&#39;);</code> 会先执行；</li><li><code>CMD</code>，<code>console.log(&#39;我是math, 我被加载了...&#39;)</code> 会先执行，因为它放在 <code>require(&#39;m1&#39;)</code> 前面。</li></ul><p>现在可以很明显的看到区别了。</p><ul><li><p><code>AMD</code> 依赖前置，<code>js</code> 很方便的就知道要加载的是哪个模块了，因为已经在 <code>define</code> 的 <code>dependencies</code> 参数中就定义好了，会立即加载它。</p></li><li><p><code>CMD</code> 是就近依赖，需要使用把模块变为字符串解析一遍才知道依赖了那些模块。</p></li></ul><h3 id="六、ES6-Modules规范"><a href="#六、ES6-Modules规范" class="headerlink" title="六、ES6 Modules规范"></a>六、ES6 Modules规范</h3><p><code>ES6</code>标准出来后，<code>ES6 Modules</code> 规范算是成为了前端的主流吧，以 <code>import</code> 引入模块，<code>export</code> 导出模块的方式被越来越多的人使用。</p><blockquote><p>但是由于 <code>ES6</code> 目前无法在浏览器中执行，所以，我们只能通过 <code>babel</code> 将不被支持的 <code>import</code> 编译为当前受到广泛支持的 <code>require</code>。</p></blockquote><h4 id="1、export-导出模块"><a href="#1、export-导出模块" class="headerlink" title="1、export 导出模块"></a>1、export 导出模块</h4><p><code>export</code> 有两种模块导出方式：</p><ul><li>命名式导出</li><li>默认导出</li></ul><p><strong>命名式导出</strong></p><p>来看几种正确和错误的写法吧：</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 以下两种为错误</span>
<span class="token comment" spellcheck="true">// 1.</span>
<span class="token keyword">export</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 2.</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> a<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 以下为正确</span>
<span class="token comment" spellcheck="true">// 3.</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> a <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 4. 接口名与模块内部变量之间，建立了一一对应的关系</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 5. 接口名与模块内部变量之间，建立了一一对应的关系</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 或者用 as 来命名</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> a <span class="token keyword">as</span> outA <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> a <span class="token keyword">as</span> outA<span class="token punctuation">,</span> b <span class="token keyword">as</span> outB <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p><strong>默认导出</strong></p><p>默认导出会在 <code>export</code> 后面加上一个 <code>default</code>：</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 1.</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> a<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 2.</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> a <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 3.</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 可以导出一个函数</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 也可以出一个类</span>
</code></pre><h4 id="2、import-导入模块"><a href="#2、import-导入模块" class="headerlink" title="2、import 导入模块"></a>2、import 导入模块</h4><p><code>import</code> 模块导入与 <code>export</code> 模块导出功能相对应，也存在两种模块导入方式：命名式导入和默认导入。</p><p>来看看写法：</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 某个模块的导出 moudule.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 模块导入</span>
<span class="token comment" spellcheck="true">// 1. 这里的a得和被加载的模块输出的接口名对应</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> a <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./module'</span>

<span class="token comment" spellcheck="true">// 2. 使用 as 换名</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> a <span class="token keyword">as</span> myA <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./module'</span>

<span class="token comment" spellcheck="true">// 3. 若是只想要运行被加载的模块可以这样写，但是即使加载2次也只是运行一次</span>
<span class="token keyword">import</span> <span class="token string">'./module'</span>

<span class="token comment" spellcheck="true">// 4. 整体加载</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> module <span class="token keyword">from</span> <span class="token string">'./module'</span>

<span class="token comment" spellcheck="true">// 5. default接口和具名接口</span>
<span class="token keyword">import</span> module<span class="token punctuation">,</span> <span class="token punctuation">{</span> a <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./module'</span>
</code></pre><p>第四种写法会获取到 <code>module</code> 中所有导出的东西，并且赋值到 <code>module</code> 这个变量下，这样我们就可以用 <code>module.a</code> 这种方式来引用 <code>a</code> 了。</p><h4 id="3、export-…-from…"><a href="#3、export-…-from…" class="headerlink" title="3、export … from…"></a>3、export … from…</h4><p>还有一种写法，可以将 <code>export</code> 和 <code>from</code> 结合起来用。</p><p>例如，我有三个模块 <code>a、b、c</code>。</p><p><code>c</code> 模块现在想要引入 <code>a</code> 模块，但是它不直接引用 <code>a</code>，而是通过 <code>b</code> 模块来引用，那么可能会认为 <code>b</code> 应该这样写：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> someVariable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./a'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> someVariable <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>引入 <code>someVariable</code> 然后再导出。</p><p>但是这会有一个问题：这还只是一个变量，我们得导入再导出，若是有很多个变量需要这样，那无疑会增加很多代码量。</p><p>所以这时候可以用下面这种方式来实现 <code>b</code>：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token punctuation">{</span> someVariable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./a'</span><span class="token punctuation">;</span>
</code></pre><h4 id="4、CommonJS-与-ES6-Modules-规范的区别"><a href="#4、CommonJS-与-ES6-Modules-规范的区别" class="headerlink" title="4、CommonJS 与 ES6 Modules 规范的区别"></a>4、CommonJS 与 ES6 Modules 规范的区别</h4><ul><li><code>CommonJS</code> 模块是运行时加载，<code>ES6 Modules</code> 是编译时输出接口<ul><li>因为 <code>CommonJS</code> 加载的是一个对象（即 <code>module.exports</code> 属性），该对象只有在脚本运行完才会生成</li><li>而 <code>ES6</code> 模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成</li></ul></li><li><strong><code>CommonJS</code> 输出是值的拷贝；<code>ES6 Modules</code> 输出的是值的引用，被输出模块的内部的改变会影响引用的改变</strong></li><li><code>ES6 Modules</code> 模块中的值属于动态只读引用<ul><li>对于只读来说，即不允许修改引入变量的值，<code>import</code> 的变量是只读的，不论是基本数据类型还是复杂数据类型</li><li>当模块遇到 <code>import</code> 命令时，就会生成一个只读引用。等到脚本真正执行时，再根据这个只读引用，到被加载的那个模块里面去取值</li><li>对于动态来说，原始值发生变化，<code>import</code> 加载的值也会发生变化。不论是基本数据类型还是复杂数据类型。</li></ul></li><li><code>CommonJS</code> 中的 <code>this</code> 指向当前模块，<code>ES6 Modules</code> 中的 <code>this</code> 指向 <code>undefined</code></li><li><code>ES6 Modules</code> 中没有这些顶层变量：<code>arguments</code>、<code>require</code>、<code>module</code>、<code>exports</code>、<code>__filename</code>、<code>__dirname</code></li></ul><p>对于 <code>ES6 Modules</code> 输出的是值的引用，可以看下面这个例子：</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// a.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./b'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./b'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// b.js</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  foo <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 执行：babel-node a.js</span>
<span class="token comment" spellcheck="true">// 执行结果：</span>
<span class="token comment" spellcheck="true">// 1</span>
<span class="token comment" spellcheck="true">// 2</span>
<span class="token comment" spellcheck="true">// 2</span>
</code></pre><h3 id="七、最后"><a href="#七、最后" class="headerlink" title="七、最后"></a>七、最后</h3><p>参考：</p><ul><li><a href="https://juejin.im/post/5b4420e7f265da0f4b7a7b27" target="_blank" rel="noopener">这一次，我要弄懂javascript的模块化</a></li></ul></div><hr><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.88rem}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{color:#fff}.reward-tabs .wechat-tab .active{color:#fff;background-color:#22ab38}.reward-tabs .alipay-tab .active{color:#fff;background-color:#019fe8}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"> <a class="reward-link btn-floating btn-large waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close"><i class="fa fa-close"></i></a><h4 class="reward-title">请我喝杯咖啡?</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs"><li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li><li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li></ul><div id="wechat"> <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div><div id="alipay"> <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码"></div></div></div></div></div></div><script>$(function(){$("#reward .reward-link").on("click",function(){$("#rewardModal").openModal()}),$("#rewardModal .close").on("click",function(){$("#rewardModal").closeModal()})})</script><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div></div><script src="/libs/share/js/social-share.min.js"></script><div class="reprint"><p> <span class="reprint-tip">转载请注明:</span> <a href="https://togoblog.cn" class="b-link-green">Deepspace</a><i class="fa fa-angle-right fa-lg fa-fw text-color"></i> <a href="/javascript-module/" class="b-link-green">JavaScript 模块化</a></p></div></div></div><div class="article" data-aos="fade-up"><div class="card relate-article-wrapper"><header class="relate-article-header">相关文章&nbsp;<i class="fa fa-arrow-right"></i></header><div class="relate-post-box"><div class="relate-post"> <span>1、</span><a id="relate-post-link" href="/es6-set-map/">ES6 —— Set 和 Map 的数据结构</a></div><div class="relate-post"> <span>2、</span><a id="relate-post-link" href="/es6-string/">ES6 —— 模板字符串</a></div><div class="relate-post"> <span>3、</span><a id="relate-post-link" href="/es6-let-const/">ES6 —— let 和 const</a></div><div class="relate-post"> <span>4、</span><a id="relate-post-link" href="/javascript-passing-by-value/">JavaScript 中的值传递</a></div><div class="relate-post"> <span>5、</span><a id="relate-post-link" href="/array-like-object/">JavaScript 中的类数组对象（array-like objects）</a></div></div></div></div><div class="disqus-card card" data-aos="fade-up"><div id="disqus_thread" class="card-content"><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div><script type="text/javascript">
    disqus_config = function () {
        this.page.url = 'https://togoblog.cn/javascript-module/';
        this.page.identifier = '/javascript-module/';
        this.page.title = 'JavaScript 模块化';
    };
    let disqus_shortname = 'https-togoblog-cn';

    (function () { // DON'T EDIT BELOW THIS LINE
        let d = document, s = d.createElement('script');
        // 如：s.src = 'https://Deepspace.disqus.com/embed.js';
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script></div></div><div class="col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title">目录</div><div id="toc-content"></div></div></div></div><script src="/libs/tocbot/tocbot.min.js"></script><script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingSelector: 'h2, h3, h4, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script></main><footer class="page-footer bg-color"><div class="container row center-align"><div class="col s12 m8 l8 copy-right"> <span>COPYRIGHT 2020 DEEPSPACE. ALL RIGHTS RESERVED.</span></div><div class="col s12 m4 l4 social-link"><a href="https://github.com/IDeepspace" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fa fa-github"></i></a><a href="mailto:cxin1427@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fa fa-envelope-open"></i></a><a href="#!" class="tooltipped" data-tooltip="QQ: 690862036" data-position="top" data-delay="50"><i class="fa fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fa fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"> <span class="title">搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input" autofocus></div><div id="searchResult"></div></div></div><script src="/js/search.js"></script><script type="text/javascript">searchFunc("/search.xml","searchInput","searchResult")</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fa fa-angle-up"></i></a></div><script src="/libs/materialize/js/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script></body></html>